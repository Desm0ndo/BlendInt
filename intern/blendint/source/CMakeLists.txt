# CMake file for BlendInt project
#

add_subdirectory(core)
add_subdirectory(font)
add_subdirectory(opengl)
add_subdirectory(gui)
add_subdirectory(stock)
add_subdirectory(cppevents)

file(WRITE ${CMAKE_BINARY_DIR}/src/dummy.cpp "// dummy file, generated by cmake")
#file(GLOB libBlendInt_SRC "*.cpp")
set(libBlendInt_SRC "${CMAKE_BINARY_DIR}/src/dummy.cpp")

if(BUILD_STATIC_LIBRARY)
    add_library (BlendInt ${libBlendInt_SRC})
else()
    add_library (BlendInt SHARED ${libBlendInt_SRC})
endif()

set(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)

if(NOT DEFINED BUILD_STATIC_LIBRARY)
    set_target_properties(BlendInt PROPERTIES VERSION 1 SOVERSION 1)
endif()

if(WITH_BUILTIN_GLFW3)
    set(LIBS ${LIBS} glfw ${GLFW_LIBRARIES})
endif()

set(MODULES BlendIntCore BlendIntFont BlendIntOpenGL BlendIntGui BlendIntStock CppEvents)

target_link_libraries(BlendInt ${MODULES} ${LIBS})

install(TARGETS BlendInt DESTINATION lib)
